<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../utilities/validarToken.js"></script>
    <script src="lista.js" defer></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../cssreset.css">
    <link rel="stylesheet" href="lista.css">
    <script src="../utilities/redirecionarPagina.js"></script>
    <title>Stock Lista</title>
</head>

<body>
    <header>
        <div class="header">
            <div class="logo">
                <img src="../images/StockLogo.png" alt="Logo da Stock lista">
            </div>
            <div class="title">
                <h1>Lista de compras</h1>
            </div>
            <div class="buttonsConfirm">
                <button class="add" id="btnAdd" onclick="abrirModalAdicionar()">Adicionar</button>
                <button class="confirm" id="btnConfirm" onclick="finalizarCompra()">Finalizar</button>
                <button class="delete" id="btnDelete" onclick="deletarItem()"><img src="../images/trashIcon.svg"
                        alt="icone de deletar"></button>
            </div>

        </div>
    </header>
    <section class="principal">
        <section class="sidebar">
            <div class="menusTabelas">
                <ul>
                    <li id="atual" onclick="redirecionarPagina('lista')"><a href="../lista/lista.html"></a>Lista</li>

                    <li onclick="redirecionarPagina('catalogo')"> <a href="../catalogo/catalogo.html"></a>Catalogo</li>

                    <li onclick="redirecionarPagina('dicas')"><a href="../dicas/dicas.html"></a>Dicas</li>

                    <li onclick="redirecionarPagina('historico')"><a href="../historico/historico.html"></a>Histórico
                    </li>
                </ul>
            </div>
            <div class="usuarioSection" onclick="redirecionarPagina('usuario')"> <a href="../usuario/usuario.html"></a>
                <div class="infoUsuario">
                    <img src="../images/account.png" alt="Icone com foto do usuario">
                    <h3 id="nomeUsuario">Placeholder</h3>
                </div>
                <p id="emailUsuario" class="emailUsuario">placeholder@gmail.com</p>
            </div>
            </div>
        </section>
        <section class="sectionLista">
            <div class="utilitarios">
                <div class="searchBar">
                    <img src="../images/searchIcon.svg" alt="">
                    <input type="text" id="inputBuscaLista" placeholder="Pesquisar" onkeyup="filtrarListaPrincipal()">
                </div>

            </div>
            <div class="lista" id="lista">

            </div>
            <div class="paginacao-container">
                <button id="btnAnterior" class="btn-seta" onclick="mudarPagina(-1)"><img
                        src="../images/less-than-svgrepo-com.svg" alt=""></button>

                <div id="paginacaoBullets" class="bullets">
                </div>

                <button id="btnProximo" class="btn-seta" onclick="mudarPagina(1)"><img
                        src="../images/greater-than-svgrepo-com.svg" alt=""></button>
            </div>
        </section>

    </section>
    <div id="modalOverlay" class="modal-overlay hidden">
        <div class="modal-content">

            <div class="modal-header">
                <h2>Adicionar Itens</h2>
                <button onclick="fecharModal()" class="btn-close">&times;</button>
            </div>

            <div id="telaSelecao">
                <div class="search-bar-modal">
                    <input type="text" id="inputBuscaCatalogo" placeholder="Buscar no catálogo..."
                        onkeyup="filtrarCatalogo()">
                </div>

                <div class="catalogo-grid" id="gridCatalogo">
                </div>

                <div class="resumo-stage hidden" id="areaResumo">
                    <h3>Itens prontos para adicionar (<span id="contadorStage">0</span>)</h3>
                    <ul id="listaStage"></ul>
                    <button onclick="salvarTudoNoBanco()" class="btn-finalizar-modal">Concluir e Salvar Lista</button>
                </div>
            </div>

            <div id="telaConfiguracao" class="hidden">
                <h3 id="nomeItemConfig">Nome do Item</h3>
                <p class="categoria-badge" id="catItemConfig">Categoria</p>

                <div class="form-group">
                    <label>Quantidade</label>
                    <div class="input-group">
                        <input type="number" id="inputQtd" placeholder="Ex: 1">
                        <select id="selectUnidade">
                            <option value="un">unidades</option>
                            <option value="kg">kg</option>
                            <option value="g">gramas</option>
                            <option value="l">litros</option>
                            <option value="dz">dúzias</option>
                            <option value="cx">caixa</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Observação (Opcional)</label>
                    <textarea id="inputObs" rows="3" placeholder="Ex: Marca específica, maduro..."></textarea>
                </div>

                <div class="modal-actions">
                    <button onclick="voltarParaSelecao()" class="btn-secondary">Cancelar</button>
                    <button onclick="confirmarItemNoStage()" class="btn-primary">Confirmar Item</button>
                </div>
            </div>

        </div>
    </div>
</body>

</html>